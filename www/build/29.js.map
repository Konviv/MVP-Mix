{"version":3,"sources":["../../src/pages/bills/bills.module.ts","../../src/pages/bills/bills.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACZ;AAUpC,IAAa,eAAe;IAA5B;IAA8B,CAAC;IAAD,sBAAC;AAAD,CAAC;AAAlB,eAAe;IAR3B,uEAAQ,CAAC;QACR,YAAY,EAAE;YACZ,yDAAS;SACV;QACD,OAAO,EAAE;YACP,sEAAe,CAAC,QAAQ,CAAC,yDAAS,CAAC;SACpC;KACF,CAAC;GACW,eAAe,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;ACZc;AACe;AAEuB;AACC;AAOjF,IAAa,SAAS;IAYpB,mBAAmB,OAAsB,EAAS,SAAoB,EAAS,WAAgC,EAC5F,YAAkC;QADlC,YAAO,GAAP,OAAO,CAAe;QAAS,cAAS,GAAT,SAAS,CAAW;QAAS,gBAAW,GAAX,WAAW,CAAqB;QAC5F,iBAAY,GAAZ,YAAY,CAAsB;QANrD,UAAK,GAAG,EAAE,CAAC;QACX,aAAQ,GAAG,EAAE,CAAC;QACd,gBAAW,GAAG,EAAE,CAAC;QACjB,gBAAW,GAAG,EAAE,CAAC;QAKf,mBAAmB;QACnB,IAAI,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC;QACtB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,EAAC,KAAK,EAAE,MAAM,EAAC,CAAC,CAAC;QAC3D,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;QAE7B,IAAI,CAAC,QAAQ,EAAE,CAAC;QAChB,IAAI,CAAC,cAAc,EAAE,CAAC;IACxB,CAAC;IAED,4BAAQ,GAAR;QAAA,iBAqFC;QApFC,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE;aAC/B,SAAS,CACR,cAAI;YACF,KAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,UAAC,IAAI;gBAChC,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,KAAK,SAAS,IAAI,IAAI,CAAC,QAAQ,KAAK,MAAM,CAAC,CAAC,CAAC;oBAC5D,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBAE5B,MAAM,CAAC;wBACL,MAAM,EAAE,IAAI,CAAC,MAAM;wBACnB,QAAQ,EAAE,IAAI,CAAC,QAAQ;wBACvB,IAAI,EAAE,CAAC,CAAC,kBAAkB,EAAE;wBAC5B,IAAI,EAAE,IAAI,CAAC,IAAI;qBAChB;gBACH,CAAC;YACH,CAAC,CAAC,CAAC;YAEH,oBAAoB;YACpB,IAAI,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC;YACtB,IAAI,YAAY,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;YAEtC,mCAAmC;YACnC,KAAI,CAAC,KAAK,GAAG,KAAI,CAAC,KAAK,CAAC,MAAM,CAAC,UAAS,CAAC;gBACvC,EAAE,CAAC,CAAC,CAAC,KAAK,SAAS,CAAC,CAAC,CAAC;oBACpB,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;oBACzB,IAAI,KAAK,GAAG,CAAC,CAAC,WAAW,EAAE,CAAC;gBAC9B,CAAC;gBACD,qDAAqD;gBACrD,MAAM,CAAC,CAAC,CAAC,KAAK,SAAS,CAAC,CAAC;YAC3B,CAAC,CAAC,CAAC;YAEH,KAAI,CAAC,KAAK,CAAC,OAAO,CAAC,WAAC;gBAClB,IAAI,UAAU,GAAG,KAAK,CAAC;gBAEvB,sCAAsC;gBACtC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;oBAC9C,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;wBACpC,UAAU,GAAG,IAAI,CAAC;oBACpB,CAAC;gBACH,CAAC;gBAED,6BAA6B;gBAC7B,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;gBACzB,CAAC,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;gBAEzB,yCAAyC;gBACzC,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;oBAChB,KAAI,CAAC,QAAQ,CAAC,IAAI,CAChB;wBACE,IAAI,EAAE,CAAC,CAAC,IAAI;wBACZ,IAAI,EAAE,CAAC,CAAC,kBAAkB,EAAE;wBAC5B,MAAM,EAAE,CAAC,CAAC,MAAM;qBACjB,CACF;oBACD,UAAU,GAAG,KAAK,CAAC;gBACrB,CAAC;YACH,CAAC,CAAC,CAAC;YAEH,wBAAwB;YACxB,IAAI,QAAQ,GAAG,IAAI,IAAI,EAAE,CAAC;YAE1B,qBAAqB;YACrB,IAAI,OAAO,GAAG,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YAC/B,IAAI,WAAW,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YAEzC,KAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,WAAC;gBAErB,2BAA2B;gBAC3B,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;gBACzB,IAAI,QAAQ,GAAG,CAAC,CAAC,OAAO,EAAE,CAAC;gBAC3B,IAAI,WAAW,GAAG,QAAQ,CAAC,OAAO,EAAE,CAAC;gBAErC,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,QAAQ,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,WAAW,CAAC,OAAO,EAAE,CAAC;oBAChF,QAAQ,GAAG,WAAW,CAAC,CAAC,CAAC;oBAC3B,OAAO,GAAG,CAAC,CAAC;gBACd,CAAC;YACH,CAAC,CAAC,CAAC;YAEH,KAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,IAAI,CAAC,CAAuB,mCAAmC;YACvF,KAAI,CAAC,kBAAkB,GAAG,OAAO,CAAC,MAAM,CAAC;YACzC,KAAI,CAAC,gBAAgB,GAAG,OAAO,CAAC,IAAI,CAAC;QAEvC,CAAC,EACD,eAAK,IAAI,YAAK,CAAC,KAAK,CAAC,EAAZ,CAAY,CACtB,CAAC;IACN,CAAC;IAGD,kCAAc,GAAd;QAAA,iBAoBC;QAnBC,IAAI,CAAC,WAAW,CAAC,UAAU,EAAE;aAC1B,SAAS,CACR,cAAI;YACF,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;YACxB,KAAI,CAAC,WAAW,GAAG,KAAI,CAAC,WAAW,CAAC,MAAM,CAAC,UAAS,CAAC;gBACnD,MAAM,CAAC,CAAC,CAAC,CAAC,UAAU,IAAI,WAAW,IAAI,CAAC,CAAC,UAAU,IAAI,OAAO,IAAI,CAAC,CAAC,UAAU,IAAI,MAAM;oBACtF,CAAC,CAAC,UAAU,IAAI,cAAc,IAAK,CAAC,CAAC,UAAU,IAAI,OAAO,IAAI,CAAC,CAAC,UAAU,IAAI,gBAAgB,CAAC,CAAC;YACpG,CAAC,CAAC,CAAC;YAEH,+BAA+B;YAC/B,KAAI,CAAC,WAAW,CAAC,OAAO,CAAC,WAAC;gBACxB,IAAI,OAAO,GAAG,CAAC,CAAC,CAAC,UAAU,GAAG,CAAC,CAAC,UAAU,CAAC,GAAG,GAAG,CAAC;gBAClD,EAAE,CAAC,CAAC,OAAO,GAAG,EAAE,CAAC,CAAC,CAAC;oBACjB,KAAI,CAAC,YAAY,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC,CAAI,2CAA2C;gBAC7F,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC,EACD,eAAK,IAAI,YAAK,CAAC,KAAK,CAAC,EAAZ,CAAY,CACtB,CAAC;IACN,CAAC;IACH,gBAAC;AAAD,CAAC;AArIY,SAAS;IAJrB,wEAAS,CAAC;QACT,QAAQ,EAAE,YAAY;OACG;KAC1B,CAAC;8GAa+G;QAC9E,MAAoB;AAwHtD;SArIY,SAAS,e","file":"29.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { BillsPage } from './bills';\n\n@NgModule({\n  declarations: [\n    BillsPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(BillsPage),\n  ],\n})\nexport class BillsPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/bills/bills.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\n\nimport { TestServiceProvider } from \"../../providers/test-service/test-service\";\nimport {ShareServiceProvider} from \"../../providers/share-service/share-service\";\n\n@IonicPage()\n@Component({\n  selector: 'page-bills',\n  templateUrl: 'bills.html',\n})\nexport class BillsPage {\n\n  month;\n  day;\n  billDate;\n  upcomingBillName;\n  upcomingBillAmount;\n  bills = [];\n  allBills = [];\n  bucketArray = [];\n  billBuckets = [];\n\n  constructor(public navCtrl: NavController, public navParams: NavParams, public testService: TestServiceProvider,\n              public shareService: ShareServiceProvider) {\n\n    // Get current date\n    var date = new Date();\n    this.month = date.toLocaleString(\"en-us\", {month: \"long\"});\n    this.day = date.getUTCDate();\n\n    this.getBills();\n    this.getBillBuckets();\n  }\n\n  getBills() {\n    this.testService.getTransactions()\n      .subscribe(\n        data => {\n          this.bills = data.result.map((data) => {\n            if (data.category === \"Service\" || data.category === \"Rent\") {\n              var d = new Date(data.date);\n\n              return {\n                amount: data.amount,\n                category: data.category,\n                date: d.toLocaleDateString(),                 // Change date to MM/DD/YYYY format\n                name: data.name\n              }\n            }\n          });\n\n          // Get current month\n          var date = new Date();\n          var currentMonth = date.getUTCMonth();\n\n          // Get bills from the current month\n          this.bills = this.bills.filter(function(i) {\n            if (i !== undefined) {\n              var d = new Date(i.date);\n              var month = d.getUTCMonth();\n            }\n            // return (i !== undefined && month == currentMonth);\n            return (i !== undefined);\n          });\n\n          this.bills.forEach(i => {\n            var inAllBills = false;\n\n            // Check if bill is in all bills array\n            for (let j = 0; j < this.allBills.length; j++) {\n              if (i.name == this.allBills[j].name) {\n                inAllBills = true;\n              }\n            }\n\n            // Set month to current month\n            var d = new Date(i.date);\n            d.setMonth(currentMonth);\n\n            // Add bill to array if not already there\n            if (!inAllBills) {\n              this.allBills.push(\n                {\n                  name: i.name,\n                  date: d.toLocaleDateString(),\n                  amount: i.amount\n                }\n              )\n              inAllBills = false;\n            }\n          });\n\n          // Display next bill due\n          var billDate = new Date();\n\n          // Find next bill due\n          var billDue = this.allBills[0];\n          var billDueDate = new Date(billDue.date);\n\n          this.allBills.forEach(i => {\n\n            // Get time in milliseconds\n            var d = new Date(i.date);\n            var billTime = d.getTime();\n            var currentTime = billDate.getTime();\n\n            if (Math.abs(currentTime - billTime) < Math.abs(currentTime - billDueDate.getTime()) &&\n                billTime > currentTime) {\n              billDue = i;\n            }\n          });\n\n          this.billDate = billDue.date;                       // Change date to MM/DD/YYYY format\n          this.upcomingBillAmount = billDue.amount;\n          this.upcomingBillName = billDue.name;\n\n        },\n        error => alert(error)\n      );\n  }\n\n\n  getBillBuckets() {\n    this.testService.getBuckets()\n      .subscribe(\n        data => {\n          this.bucketArray = data;\n          this.billBuckets = this.bucketArray.filter(function(i) {\n            return (i.bucketname == \"Insurance\" || i.bucketname == \"Loans\" || i.bucketname == \"Rent\" ||\n              i.bucketname == \"Subscription\" ||  i.bucketname == \"Bills\" || i.bucketname == \"Variable Bills\");\n          });\n\n          // Check if bucket is below 15%\n          this.bucketArray.forEach(i => {\n            var percent = (i.bucketfill / i.bucketsize) * 100;\n            if (percent < 15) {\n              this.shareService.setLowBucketTrigger(true);    // Activate trigger if percent is below 15%\n            }\n          });\n        },\n        error => alert(error),\n      );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/bills/bills.ts"],"sourceRoot":""}